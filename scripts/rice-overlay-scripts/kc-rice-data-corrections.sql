-- KC BOOTSTRAP DATA CORRECTIONS NEEDED AS OF NOW
-- take in quickstart and admin from rice bootstrap and remove kc entries for those entities
INSERT INTO KRIM_ENTITY_T (ENTITY_ID, OBJ_ID, VER_NBR, ACTV_IND, LAST_UPDT_DT)
VALUES ('1100', '5B97C50B03946110E0404F8189D85213', 1, 'Y', to_date('13-11-2008 14:06:35', 'dd-mm-yyyy hh24:mi:ss'));

INSERT INTO KRIM_ENTITY_T (ENTITY_ID, OBJ_ID, VER_NBR, ACTV_IND, LAST_UPDT_DT)
VALUES ('1109', '5B97C50B039D6110E0404F8189D85213', 1, 'Y', to_date('13-11-2008 14:06:37', 'dd-mm-yyyy hh24:mi:ss'));

UPDATE KRIM_ENTITY_EMAIL_T SET ENTITY_ID = 1109 WHERE ENTITY_ID = 1201;
UPDATE KRIM_ENTITY_EMP_INFO_T SET ENTITY_ID = 1109 WHERE ENTITY_ID = 1201;
UPDATE KRIM_ENTITY_PHONE_T SET ENTITY_ID = 1109 WHERE ENTITY_ID = 1201;
UPDATE KRIM_ENTITY_ADDR_T SET ENTITY_ID = 1109 WHERE ENTITY_ID = 1201;
UPDATE KRIM_ENTITY_NM_T SET ENTITY_ID = 1109 WHERE ENTITY_ID = 1201;
UPDATE KRIM_ENTITY_EMAIL_T SET ENTITY_ID = 1100 WHERE ENTITY_ID = 1260;
UPDATE KRIM_ENTITY_EMP_INFO_T SET ENTITY_ID = 1100 WHERE ENTITY_ID = 1260;
UPDATE KRIM_ENTITY_PHONE_T SET ENTITY_ID = 1100 WHERE ENTITY_ID = 1260;
UPDATE KRIM_ENTITY_ADDR_T SET ENTITY_ID = 1100 WHERE ENTITY_ID = 1260;
UPDATE KRIM_ENTITY_NM_T SET ENTITY_ID = 1100 WHERE ENTITY_ID = 1260;

DELETE FROM KRIM_ENTITY_ENT_TYP_T WHERE ENTITY_ID IN ( 1201, 1260);
DELETE FROM KRIM_PRNCPL_T WHERE ENTITY_ID IN ( 1201, 1260);
DELETE FROM KRIM_ENTITY_T WHERE ENTITY_ID IN ( 1201, 1260);

INSERT INTO KRIM_PRNCPL_T (PRNCPL_ID, OBJ_ID, VER_NBR, PRNCPL_NM, ENTITY_ID, PRNCPL_PSWD, ACTV_IND, LAST_UPDT_DT)
VALUES ('admin', '5B97C50B03C56110E0404F8189D85213', 1, 'admin', '1100', '', 'Y', to_date('13-11-2008 14:06:43', 'dd-mm-yyyy hh24:mi:ss'));

INSERT INTO KRIM_PRNCPL_T (PRNCPL_ID, OBJ_ID, VER_NBR, PRNCPL_NM, ENTITY_ID, PRNCPL_PSWD, ACTV_IND, LAST_UPDT_DT)
VALUES ('quickstart', '5B97C50B03D86110E0404F8189D85213', 1, 'quickstart', '1109', '', 'Y', to_date('13-11-2008 14:06:46', 'dd-mm-yyyy hh24:mi:ss'));

INSERT INTO KRIM_ENTITY_ENT_TYP_T(ENTITY_ID, ENT_TYP_CD, ACTV_IND, OBJ_ID, VER_NBR, LAST_UPDT_DT) VALUES (1100, 'PERSON', 'Y', SYS_GUID(), 1, SYSDATE);
INSERT INTO KRIM_ENTITY_ENT_TYP_T(ENTITY_ID, ENT_TYP_CD, ACTV_IND, OBJ_ID, VER_NBR, LAST_UPDT_DT) VALUES (1109, 'PERSON', 'Y', SYS_GUID(), 1, SYSDATE);

UPDATE KRIM_GRP_MBR_T SET MBR_ID = 'quickstart' WHERE MBR_ID = '10000000001';
UPDATE KRIM_ROLE_MBR_T SET MBR_ID = 'quickstart' WHERE MBR_ID = '10000000001';
UPDATE KRIM_GRP_MBR_T SET MBR_ID = 'admin' WHERE MBR_ID = '10000000060';
UPDATE KRIM_ROLE_MBR_T SET MBR_ID = 'admin' WHERE MBR_ID = '10000000060';

-- for some reason, we have different perm_ids for these records 1096 and 1097
-- again take in the rice bootstrap entries and remove kc records
INSERT INTO KRIM_PERM_T (PERM_ID, OBJ_ID, VER_NBR, PERM_TMPL_ID, NMSPC_CD, NM, DESC_TXT, ACTV_IND)
VALUES ('298', '641E580969E31B49E0404F8189D86190', 1, '1', 'KR-WKFLW', 'View Other Action List', 'Authorizes users to access other users action lists via the Help Desk Action List Login.', 'Y');

INSERT INTO KRIM_PERM_T (PERM_ID, OBJ_ID, VER_NBR, PERM_TMPL_ID, NMSPC_CD, NM, DESC_TXT, ACTV_IND)
VALUES ('299', '641E580969E51B49E0404F8189D86190', 1, '1', 'KR-WKFLW', 'Unrestricted Document Search', 'Users who can perform a document search with no criteria or result limits.', 'Y');

DELETE FROM KRIM_PERM_ATTR_DATA_T WHERE PERM_ID IN (1096, 1097);
UPDATE KRIM_ROLE_PERM_T SET PERM_ID = 298 WHERE PERM_ID = 1096;
UPDATE KRIM_ROLE_PERM_T SET PERM_ID = 299 WHERE PERM_ID = 1097;
DELETE FROM KRIM_PERM_T WHERE PERM_ID IN (1096, 1097);

-- there are some obsolete rice entries still present in DBA. Remove those.
DELETE FROM KRIM_ROLE_PERM_T WHERE PERM_ID IN (SELECT PERM_ID FROM KRIM_PERM_T WHERE PERM_TMPL_ID IN (SELECT PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE KIM_TYP_ID = 22)); 
DELETE FROM KRIM_PERM_ATTR_DATA_T WHERE PERM_ID IN (SELECT PERM_ID FROM KRIM_PERM_T WHERE PERM_TMPL_ID IN (SELECT PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE KIM_TYP_ID = 22));
DELETE FROM KRIM_PERM_T WHERE PERM_TMPL_ID IN (SELECT PERM_TMPL_ID FROM KRIM_PERM_TMPL_T WHERE KIM_TYP_ID = 22);
DELETE FROM KRIM_PERM_TMPL_T WHERE KIM_TYP_ID = 22;
DELETE FROM KRIM_TYP_ATTR_T WHERE KIM_TYP_ID = 22;
DELETE FROM KRIM_TYP_T WHERE KIM_TYP_ID = 22;
DELETE FROM KRIM_ATTR_DEFN_T WHERE KIM_ATTR_DEFN_ID = 17;

--INSERT INTO KRIM_ATTR_DEFN_T (KIM_ATTR_DEFN_ID, OBJ_ID, VER_NBR, NM, LBL, ACTV_IND, NMSPC_CD, CMPNT_NM)
--VALUES ('17', '5ADF18B6D4987954E0404F8189D85002', 1, 'entityTypeCode', null, 'Y', 'KR-IDM', 'org.kuali.rice.kim.bo.impl.KimAttributes');
--INSERT INTO KRIM_TYP_T (KIM_TYP_ID, OBJ_ID, VER_NBR, NM, SRVC_NM, ACTV_IND, NMSPC_CD)
--VALUES ('22', '5ADF18B6D5097954E0404F8189D85002', 1, 'Entity Type && Field(s)', null, 'Y', 'KR-IDM');
--INSERT INTO KRIM_TYP_ATTR_T (KIM_TYP_ATTR_ID, OBJ_ID, VER_NBR, SORT_CD, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ACTV_IND)
--VALUES ('37', '5ADF18B6D50A7954E0404F8189D85002', 1, 'a', '22', '17', 'Y');
--INSERT INTO KRIM_TYP_ATTR_T (KIM_TYP_ATTR_ID, OBJ_ID, VER_NBR, SORT_CD, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ACTV_IND)
--VALUES ('72', '5B47A17D07C2E43DE0404F8189D873F1', 1, 'c', '22', '6', 'Y');
--INSERT INTO KRIM_PERM_TMPL_T (PERM_TMPL_ID, OBJ_ID, VER_NBR, NMSPC_CD, NM, DESC_TXT, KIM_TYP_ID, ACTV_IND)
--VALUES ('39', '5ADF18B6D50B7954E0404F8189D85002', 1, 'KR-IDM', 'Modify Entity', null, '22', 'Y');
--INSERT INTO KRIM_PERM_T (PERM_ID, OBJ_ID, VER_NBR, PERM_TMPL_ID, NMSPC_CD, NM, DESC_TXT, ACTV_IND)
--VALUES ('153', '5B4F09744951EF33E0404F8189D84F24', 1, '39', 'KR-SYS', 'Modify Entity', null, 'Y');
--INSERT INTO KRIM_PERM_T (PERM_ID, OBJ_ID, VER_NBR, PERM_TMPL_ID, NMSPC_CD, NM, DESC_TXT, ACTV_IND)
--VALUES ('154', '5B4F09744952EF33E0404F8189D84F24', 1, '39', 'KR-SYS', 'Modify Entity', null, 'Y');
--INSERT INTO KRIM_PERM_ATTR_DATA_T (ATTR_DATA_ID, OBJ_ID, VER_NBR, PERM_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL)
--VALUES ('199', '5B4F09744A37EF33E0404F8189D84F24', 1, '153', '22', '17', 'Person');
--INSERT INTO KRIM_PERM_ATTR_DATA_T (ATTR_DATA_ID, OBJ_ID, VER_NBR, PERM_ID, KIM_TYP_ID, KIM_ATTR_DEFN_ID, ATTR_VAL)
--VALUES ('200', '5B4F09744A38EF33E0404F8189D84F24', 1, '154', '22', '17', 'System');
--INSERT INTO KRIM_ROLE_PERM_T (ROLE_PERM_ID, OBJ_ID, VER_NBR, ROLE_ID, PERM_ID, ACTV_IND)
--VALUES ('10400', '92FE99B04589DDD5E040DC0A1F8A232C', 1, '1139', '153', 'Y');

-- correct the OBJ_ID collision issue
UPDATE KRIM_TYP_T SET OBJ_ID = SYS_GUID() WHERE OBJ_ID = 'A8488117C37040B2A56531BCBB7DCD9B' ;
UPDATE KRIM_PERM_T SET OBJ_ID = SYS_GUID() WHERE OBJ_ID = '3F0FE9D4-83BC-7CC6-5292-49E6F23FA6F0' ;
UPDATE KRIM_PERM_ATTR_DATA_T SET OBJ_ID = SYS_GUID() WHERE OBJ_ID = '77151AD4B1F69985E0404F8189D80E8B' ;
UPDATE KRIM_ROLE_MBR_ATTR_DATA_T SET OBJ_ID = SYS_GUID() WHERE OBJ_ID = '5D0BD1CB88BF4EF794A08CA6E892F500' ;
UPDATE KRIM_ROLE_PERM_T SET OBJ_ID = SYS_GUID() WHERE OBJ_ID = '1C0D53B5D8EC4928A672DA52C2DB75F4' ;
UPDATE KRIM_ROLE_PERM_T SET OBJ_ID = SYS_GUID() WHERE OBJ_ID = 'D28CF8A4-0951-DE4E-4350-D29F8FEFE053' ;
UPDATE KRIM_GRP_MBR_T SET OBJ_ID = SYS_GUID() WHERE OBJ_ID = '77151AD4B1E59985E0404F8189D80E8B' ;
UPDATE KRNS_PARM_T SET OBJ_ID = SYS_GUID() WHERE OBJ_ID = 'd6173017-d9d4-4309-b69c-75c111efb04b' ;
COMMIT;

-- cleanup KC Parameter Detail Type Codes
UPDATE KRNS_PARM_T T SET T.APPL_NMSPC_CD = 'KC' WHERE NMSPC_CD LIKE 'KC%' AND PARM_NM NOT IN ('KIM_SHOW_BLANK_QUALIFIERS');
--FEDERAL_SPONSOR_TYPE_CODE
--INVALID_FILE_NAME_CHECK 
-- have been newly added with KUALI NS when it should have been KC

-- DUPLICATE OBJ_ID HAS BEEN REINTRODUCED IN KRACOEUS-4272.SQL
UPDATE KRIM_PERM_T SET OBJ_ID = SYS_GUID() WHERE OBJ_ID = 'FC8498B022A64A18897A146C5062ECDB' ;
UPDATE KRIM_ROLE_PERM_T SET OBJ_ID = SYS_GUID() WHERE OBJ_ID = 'FC8498B022A64A18897A146C5062ECDB' ;
UPDATE KRIM_ROLE_PERM_T SET OBJ_ID = SYS_GUID() WHERE OBJ_ID = '7FF7129A9E5B061FE040007F01001C34';

-- HANDLING DUPLICATE OBJ_ID FROM KRACOEUS-4416.SQL
UPDATE KRNS_PARM_T SET OBJ_ID = SYS_GUID() WHERE OBJ_ID = '0920b4d0-958a-4f83-8a69-105fb64f936f';


-- DEMO DATA
INSERT INTO KRIM_ENTITY_ADDR_T (ENTITY_ADDR_ID, ENTITY_ID, ENT_TYP_CD, ADDR_TYP_CD, ADDR_LINE_1, ADDR_LINE_2, 
ADDR_LINE_3, CITY_NM, POSTAL_STATE_CD, POSTAL_CD, DFLT_IND, LAST_UPDT_DT, POSTAL_CNTRY_CD, ACTV_IND, OBJ_ID, VER_NBR)
VALUES (1, 1204, 'PERSON', 'WRK', 'Test Address', 'Test Apt', NULL, 'East Lansing', 'MI', '48823', 'Y', SYSDATE, 'US', 'Y', SYS_GUID(), 1);

COMMIT;
