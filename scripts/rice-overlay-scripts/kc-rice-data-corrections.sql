-- KC BOOTSTRAP DATA CORRECTIONS NEEDED AS OF NOW
-- take in quickstart from rice bootstrap and remove kc entries for those entities

DECLARE 
		l_quickstart_entity_id VARCHAR2(40);
		l_quickstart_prncpl_id VARCHAR2(40);
BEGIN
	
		SELECT ENTITY_ID INTO l_quickstart_entity_id FROM KRIM_PRNCPL_T WHERE PRNCPL_NM = 'quickstart';
		SELECT PRNCPL_ID INTO l_quickstart_prncpl_id FROM KRIM_PRNCPL_T WHERE PRNCPL_NM = 'quickstart';

		-- quickstart user record 
		INSERT INTO KRIM_ENTITY_T (ACTV_IND,ENTITY_ID,LAST_UPDT_DT,OBJ_ID,VER_NBR)  
		VALUES ('Y','1109',TO_DATE( '20081113140637', 'YYYYMMDDHH24MISS' ),'5B97C50B039D6110E0404F8189D85213',1);
		INSERT INTO KRIM_ENTITY_ENT_TYP_T (ACTV_IND,ENTITY_ID,ENT_TYP_CD,LAST_UPDT_DT,OBJ_ID,VER_NBR) 
		VALUES ('Y','1109','PERSON',TO_DATE( '20081113140650', 'YYYYMMDDHH24MISS' ),'5B97C50B03E96110E0404F8189D85213',1);

		UPDATE KRIM_ENTITY_EMAIL_T SET ENTITY_ID = 1109 WHERE ENTITY_ID = l_quickstart_entity_id;
		UPDATE KRIM_ENTITY_EMP_INFO_T SET ENTITY_ID = 1109 WHERE ENTITY_ID = l_quickstart_entity_id;
    	UPDATE KRIM_ENTITY_AFLTN_T SET ENTITY_ID = 1109 WHERE ENTITY_ID = l_quickstart_entity_id;
		UPDATE KRIM_ENTITY_PHONE_T SET ENTITY_ID = 1109 WHERE ENTITY_ID = l_quickstart_entity_id;
		UPDATE KRIM_ENTITY_ADDR_T SET ENTITY_ID = 1109 WHERE ENTITY_ID = l_quickstart_entity_id;
		UPDATE KRIM_ENTITY_NM_T SET ENTITY_ID = 1109 WHERE ENTITY_ID = l_quickstart_entity_id;
		DELETE FROM KRIM_ENTITY_ENT_TYP_T WHERE ENTITY_ID IN ( l_quickstart_entity_id );
		DELETE FROM KRIM_PRNCPL_T WHERE ENTITY_ID IN ( l_quickstart_entity_id );
		
		INSERT INTO KRIM_PRNCPL_T (ACTV_IND,ENTITY_ID,LAST_UPDT_DT,OBJ_ID,PRNCPL_ID,PRNCPL_NM,VER_NBR) 
		VALUES ('Y','1109',TO_DATE( '20081113140646', 'YYYYMMDDHH24MISS' ),'5B97C50B03D86110E0404F8189D85213','quickstart','quickstart',1);

		UPDATE KRIM_GRP_MBR_T SET MBR_ID = 'quickstart' WHERE MBR_ID = l_quickstart_prncpl_id;
		UPDATE KRIM_ROLE_MBR_T SET MBR_ID = 'quickstart' WHERE MBR_ID = l_quickstart_prncpl_id;
		DELETE FROM KRIM_ENTITY_T WHERE ENTITY_ID IN ( l_quickstart_entity_id );

		-- DEMO DATA
		INSERT INTO KRIM_ENTITY_ADDR_T (ENTITY_ADDR_ID, ENTITY_ID, ENT_TYP_CD, ADDR_TYP_CD, ADDR_LINE_1, ADDR_LINE_2, 
		ADDR_LINE_3, CITY_NM, POSTAL_STATE_CD, POSTAL_CD, DFLT_IND, LAST_UPDT_DT, POSTAL_CNTRY_CD, ACTV_IND, OBJ_ID, VER_NBR)
		VALUES (1, (SELECT ENTITY_ID FROM KRIM_PRNCPL_T WHERE PRNCPL_NM = 'majors'), 'PERSON', 'WRK', 'Test Address', 'Test Apt', NULL, 'East Lansing', 'MI', '48823', 'Y', SYSDATE, 'US', 'Y', SYS_GUID(), 1);

		-- Temporary till KC System User gets fixed
		SELECT ENTITY_ID INTO l_kcuser_entity_id FROM KRIM_PRNCPL_T WHERE PRNCPL_NM = 'kc';
		DELETE FROM KRIM_PRNCPL_T WHERE ENTITY_ID = l_kcuser_entity_id;
		DELETE FROM KRIM_ENTITY_ENT_TYP_T  WHERE ENTITY_ID = l_kcuser_entity_id;
		DELETE FROM KRIM_ENTITY_T  WHERE ENTITY_ID = l_kcuser_entity_id;
		
		INSERT INTO KRIM_ENTITY_T (ENTITY_ID, OBJ_ID, VER_NBR, ACTV_IND, LAST_UPDT_DT) VALUES ('1200', SYS_GUID(), 1, 'Y', SYSDATE);
		INSERT INTO KRIM_ENTITY_ENT_TYP_T (ACTV_IND, OBJ_ID, VER_NBR, ENT_TYP_CD, ENTITY_ID, LAST_UPDT_DT) VALUES ('Y', SYS_GUID(), 1, 'SYSTEM', '1200', SYSDATE);
		INSERT INTO KRIM_PRNCPL_T (ACTV_IND,ENTITY_ID,LAST_UPDT_DT,OBJ_ID,PRNCPL_ID,PRNCPL_NM,VER_NBR) VALUES ('Y','1200',SYSDATE, SYS_GUID(), 10000000065,'kc',1)

		--??? HOW DID THIS HAPPEN
		UPDATE KRIM_ROLE_PERM_T SET PERM_ID = 298 WHERE PERM_ID = 908;
		UPDATE KRIM_ROLE_PERM_T SET PERM_ID = 299 WHERE PERM_ID = 909;
		
		-- PRODUCER_ID FOR Notification System became 1000 from 1???
		DELETE FROM KREN_CHNL_PRODCR_T WHERE PRODCR_ID = 1000;
		DELETE FROM KREN_PRODCR_T WHERE PRODCR_ID = 1000;
		insert into KREN_PRODCR_T (PRODCR_ID, NM, DESC_TXT, CNTCT_INFO, VER_NBR)
		values (1, 'Notification System', 'This producer represents messages sent from the general message sending forms.', 'kuali-ken-testing@cornell.edu', 1);

		INSERT INTO KREN_CHNL_PRODCR_T (CHNL_ID, PRODCR_ID) VALUES ('1000', '1');
		COMMIT;
END; 