DELETE FROM KRIM_ROLE_MBR_T WHERE ROLE_ID = (SELECT ROLE_ID FROM KRIM_ROLE_T WHERE ROLE_NM = 'IRBApprover')
   AND MBR_TYP_CD = 'P' AND MBR_ID = (SELECT PRNCPL_ID FROM KRIM_PRNCPL_T WHERE PRNCPL_NM = 'irbadmin');

INSERT INTO KRIM_ROLE_MBR_ID_S VALUES (NULL);

INSERT INTO KRIM_ROLE_MBR_T (ROLE_MBR_ID, ROLE_ID, MBR_ID, MBR_TYP_CD, OBJ_ID, VER_NBR, LAST_UPDT_DT) 
SELECT MAX(ID), (SELECT ROLE_ID FROM KRIM_ROLE_T WHERE ROLE_NM = 'IRBApprover'  AND NMSPC_CD = 'KC-WKFLW'),
(SELECT ROLE_ID FROM KRIM_ROLE_T RT WHERE RT.ROLE_NM = 'IRB Administrator'), 'R', UUID(), 1, NOW() FROM KRIM_ROLE_MBR_ID_S;

INSERT INTO KRIM_ROLE_MBR_ID_S VALUES (NULL);

INSERT INTO KRIM_ROLE_MBR_T (ROLE_MBR_ID, ROLE_ID, MBR_ID, MBR_TYP_CD, OBJ_ID, VER_NBR, LAST_UPDT_DT)
SELECT MAX(ID), 
(SELECT ROLE_ID FROM KRIM_ROLE_T WHERE ROLE_NM = 'IRBApprover'), 
(SELECT ROLE_ID FROM KRIM_ROLE_T WHERE ROLE_NM = 'ProtocolApprover'  AND NMSPC_CD = 'KC-PROTOCOL'), 'R', UUID(), 1, NOW() FROM KRIM_ROLE_MBR_ID_S;

COMMIT;
