ALTER TABLE EPS_PROP_COST_SHARING ADD (BUDGET_ID NUMBER (12, 0) ,
	HIERARCHY_PROPOSAL_NUMBER VARCHAR (12) , 
	HIDE_IN_HIERARCHY CHAR (1) DEFAULT 'N' NOT NULL) ;

ALTER TABLE EPS_PROP_COST_SHARING DROP PRIMARY KEY;

ALTER TABLE EPS_PROP_COST_SHARING MODIFY PROPOSAL_NUMBER NULL;

ALTER TABLE EPS_PROP_COST_SHARING MODIFY BUDGET_VERSION_NUMBER NULL;

UPDATE EPS_PROP_COST_SHARING 
SET BUDGET_ID=(SELECT BUDGET_ID FROM BUDGET 
               WHERE BUDGET.PROPOSAL_NUMBER = EPS_PROP_COST_SHARING.PROPOSAL_NUMBER
                     AND BUDGET.VERSION_NUMBER = EPS_PROP_COST_SHARING.BUDGET_VERSION_NUMBER) ;

COMMIT;

ALTER TABLE EPS_PROP_COST_SHARING 
    ADD CONSTRAINT PK_EPS_PROP_COST_SHARING 
            PRIMARY KEY (BUDGET_ID, COST_SHARE_ID) ;