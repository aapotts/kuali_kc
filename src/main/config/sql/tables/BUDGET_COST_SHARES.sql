--DROP TABLE BUDGET_COST_SHARES;

CREATE TABLE BUDGET_COST_SHARES (
 	"PROPOSAL_NUMBER" VARCHAR2(12) constraint BUDGET_COST_SHARE_PN NOT NULL ENABLE, 
	"BUDGET_VERSION_NUMBER" NUMBER(3,0) constraint BUDGET_COST_SHARE_BV NOT NULL ENABLE,
	"COST_SHARE_ID" NUMBER(5,0) constraint BUDGET_COST_SHARE_ID NOT NULL ENABLE,
	 
	"FISCAL_YEAR" NUMBER(4,0), 
 	"SHARE_AMOUNT"  NUMBER(12,2), 
	"SHARE_PCT" NUMBER(6,2), 
	"SOURCE_ACCOUNT" VARCHAR2(255),
	
	"UPDATE_TIMESTAMP" DATE constraint BUDGET_COST_SHARE_UT NOT NULL ENABLE, 
	"UPDATE_USER" VARCHAR2(8) constraint BUDGET_COST_SHARE_UU NOT NULL ENABLE, 
	"VER_NBR" NUMBER(8,0) DEFAULT 1  constraint  BUDGET_COST_SHARE_VN  NOT NULL ENABLE,
	"OBJ_ID" VARCHAR2(36) DEFAULT SYS_GUID()  constraint  BUDGET_COST_SHARE_OI  NOT NULL ENABLE,
	
	CONSTRAINT "PK_BUDGET_COST_SHARE_KRA" PRIMARY KEY ("PROPOSAL_NUMBER", "BUDGET_VERSION_NUMBER", "COST_SHARE_ID") ENABLE
);

ALTER TABLE BUDGET_COST_SHARES ADD CONSTRAINT "FK_BUDGET_COSTSHARE_BUDGET_KRA" FOREIGN KEY ("PROPOSAL_NUMBER", "BUDGET_VERSION_NUMBER")
	  REFERENCES "BUDGET" ("PROPOSAL_NUMBER", "VERSION_NUMBER");