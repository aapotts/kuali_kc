-- Table Script
CREATE TABLE QUESTION_EXPLANATION ( 
    QUESTION_EXPLANATION_ID NUMBER(12,0) NOT NULL, 
    QUESTION_REF_ID_FK NUMBER(12,0) NOT NULL, 
    EXPLANATION_TYPE CHAR(1) NOT NULL, 
    EXPLANATION CLOB, 
    UPDATE_TIMESTAMP DATE NOT NULL,
    UPDATE_USER VARCHAR2(60) NOT NULL, 
    VER_NBR NUMBER(8,0) DEFAULT 1 NOT NULL, 
    OBJ_ID VARCHAR2(36) DEFAULT SYS_GUID() NOT NULL);


-- Primary Key Constraint
ALTER TABLE QUESTION_EXPLANATION 
ADD CONSTRAINT PK_QUESTION_EXPLANATION 
PRIMARY KEY (QUESTION_EXPLANATION_ID);

-- *************** UNIQUE CONSTRAINT DEFINED FOR COMPOSITE KEY COLUMNS ************
ALTER TABLE QUESTION_EXPLANATION 
ADD CONSTRAINT UQ_QUESTION_EXPLANATION 
UNIQUE (QUESTION_REF_ID_FK, EXPLANATION_TYPE);

-- Foreign Key Constraint(s)
ALTER TABLE QUESTION_EXPLANATION 
ADD CONSTRAINT FK_QUESTION_EXPLANATION
FOREIGN KEY (QUESTION_REF_ID_FK) 
REFERENCES QUESTION (QUESTION_REF_ID);

